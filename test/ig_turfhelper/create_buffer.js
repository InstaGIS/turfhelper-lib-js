(function (QUnit) {


    QUnit.module("turfHelpers Create Buffer");


    QUnit.test('turfHelpers.createbuffer should be of type function', function (assert) {
        assert.equal(typeof turfHelper.createbuffer, 'function', 'turfHelpers.createbuffer should be of type function');
    });
    QUnit.test('turfHelpers.createbuffer should create a correct buffer from a  google.maps.Polygon', function (assert) {
        var done = assert.async();

        var runtest = function (gmaps) {

            var gmPolygon = new gmaps.Polygon({
                paths: [{
                        lng: -49.4384765625,
                        lat: -8.79822545902
                    },
                    {
                        lng: -39.7705078125,
                        lat: -8.79822545902
                    },
                    {
                        lng: -39.7705078125,
                        lat: 0.48339270279
                    },
                    {
                        lng: -49.4384765625,
                        lat: 0.48339270279
                    },
                    {
                        lng: -49.4384765625,
                        lat: -8.79822545902
                    }
                ]
            });


            var featurePolygon = {
                "geometry": {
                    "coordinates": [
                        [
                            [-49.43854112378032, -8.798220307443456],
                            [-49.43854084431382, -8.798233314207229],
                            [-49.43853790940472, -8.798245996479425],
                            [-49.4385324402912, -8.798257830363681],
                            [-49.4385246628977, -8.798268327009577],
                            [-49.43851489850223, -8.798277052806545],
                            [-49.43850355046495, -8.798283647296133],
                            [-49.4384910875658, -8.798287838062397],
                            [-49.43847802463967, -8.798289451985468],
                            [-39.770506208996004, -8.798298968280701],
                            [-39.770492445913874, -8.798297400077955],
                            [-39.77047921564461, -8.798293337414359],
                            [-39.770466976930926, -8.798286921156391],
                            [-39.77045615413494, -8.798278373778615],
                            [-39.77044712252374, -8.798267991649745],
                            [-39.7704401952574, -8.79825613475654],
                            [-39.77043561253041, -8.798243214221518],
                            [-39.77043353324306, -8.7982296780479],
                            [-39.77043484139398, 0.4833969216300973],
                            [-39.77043693310362, 0.48341055413592626],
                            [-39.7704415486217, 0.48342355100656653],
                            [-39.770448523602504, 0.4834354494609356],
                            [-39.7704576096865, 0.48344582582964496],
                            [-39.77046848334379, 0.48345431064075917],
                            [-39.77048075739442, 0.48346060177560346],
                            [-39.77049399479468, 0.4834644752262382],
                            [-39.770507724199234, 0.48346579307171655],
                            [-49.43847664276788, 0.48345596410946406],
                            [-49.43848960252102, 0.48345460569805127],
                            [-49.438502009035204, 0.4834506210007059],
                            [-49.43851333595375, 0.4834441790733763],
                            [-49.43852310272331, 0.48343555322166676],
                            [-49.43853089498146, 0.4834251094055014],
                            [-49.438536382136334, 0.4834132907128672],
                            [-49.438539331391674, 0.4834005985614862],
                            [-49.438539617623505, 0.48338757142588706],
                            [-49.43854112378032, -8.798220307443456]
                        ]
                    ],
                    "type": "Polygon"
                },
                "properties": {},
                "type": "Feature"
            };


            var result = turfHelper.createbuffer(gmPolygon, 10, 'meters', 32);
            assert.deepEqual(result, featurePolygon, 'turfHelpers.createbuffer should create a correct buffer from a  google.maps.Polygon');
            done();
        };
        if (window.gmaps.then) {
            window.gmaps.then(function (gmaps) {
                runtest(gmaps);
            })
        } else {
            runtest(window.gmaps);
        }
    });
})(QUnit);
